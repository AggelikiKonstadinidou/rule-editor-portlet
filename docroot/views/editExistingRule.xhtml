<?xml version="1.0"?>

<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<h:head />
	<h:body>
		<h:form id="form">
			<p:panel id="informationPanel">
				<f:facet name="header">
					<h:outputText value="Step 1:Upload an existing rule" />
				</f:facet>

				<br />

				<p:fileUpload style="width: 600px;" mode="advanced"
					value="#{editRuleStep1Bean.fileName}" auto="true"
					fileUploadListener="#{editRuleStep1Bean.onFileUpload}"
					allowTypes="/(\.|\/)(rules)$/" update=":#{p:component('rulesList')}">
				</p:fileUpload>

				<p:dataTable id="rulesList" var="rule"
					value="#{editRuleStep1Bean.rulesList}" rowKey="#{rule.name}"
					selectionMode="single"
					selection="#{editRuleStep1Bean.selectedRule}" scrollable="true"
					scrollHeight="300">
					<p:ajax event="rowSelect" update=":#{p:component('nextBut')}" />
					<f:facet name="header">
						<h:outputText value="Rules" />
					</f:facet>

					<p:column headerText="Name">
						<h:outputText value="#{rule.name}" />
					</p:column>
					<p:column headerText="Rule body">
						<h:outputText value="#{rule.body}" />
					</p:column>

				</p:dataTable>

				<div align="right">
					<p:commandLink id="prevBut" ajax="false" style="align: right"
						action="/views/initialMenu.xhtml?javax.portlet.faces.PortletMode=view&amp;javax.portlet.faces.WindowState=normal">
						<h:graphicImage url="/previous.png"
							styleClass="basicImageStyle valign-middle"
							title="Go back to the previous page" />
						<span style="margin-right: 20px"> Go to initial menu </span>
					</p:commandLink>
					<p:commandLink id="nextBut" ajax="false"
						binding="#{editRuleStep1Bean.button}" style="align: right"
						disabled="#{editRuleStep1Bean.formCompleted}"
						action= "/views/addConflictResolRule.xhtml?javax.portlet.faces.PortletMode=view&amp;javax.portlet.faces.WindowState=normal"
						actionListener="#{editRuleStep1Bean.submitOption}">
						<span> Go to next step </span>
						<h:graphicImage url="/next.png"
							styleClass="basicImageStyle valign-middle"
							title="Go forward to the next page" />
					</p:commandLink>
				</div>
			</p:panel>
		</h:form>

	</h:body>
</f:view>