<?xml version="1.0"?>

<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<h:head />
	<h:body>
		<h:form id="form" enctype="multipart/form-data">
			<p:panel id="informationPanel">
				<f:facet name="header">
					<h:outputText value="Step2: Edit Rule #{rule.name}" />
				</f:facet>

				<h:panelGrid columns="2" id="grid1">
					<p:scrollPanel style="width:535px;height:800px;">
						<p:tree id="tree" value="#{addNewRuleBean.root}" var="node"
							orientation="horizontal" selectionMode="single"
							selection="#{addNewRuleBean.selectedNode}">
							<p:ajax event="select" listener="#{addNewRuleBean.onNodeSelect}"
								update=":#{p:component('dataProperties')},
								:#{p:component('objectProperties')},:#{p:component('instances')}" />
							<p:treeNode>
								<h:outputText value="#{node}" />
							</p:treeNode>
						</p:tree>
					</p:scrollPanel>
					<h:panelGrid rows="4" id="grid2" style="width:535px;">

						<p:dataTable id="dataProperties" var="data"
							value="#{addNewRuleBean.datatypes}" rowKey="#{data.ontologyURI}"
							selectionMode="single"
							selection="#{addNewRuleBean.selectedDataProperty}"
							scrollable="true" scrollHeight="100">
							<f:facet name="header">
								<h:outputText value="Data Properties" />
							</f:facet>

							<p:column headerText="Name">
								<h:outputText value="#{data.propertyName}" />
							</p:column>
							<p:column headerText="Value Range">
								<h:outputText value="#{data.dataRange}" />
							</p:column>

						</p:dataTable>

						<p:dataTable id="objectProperties" var="data"
							value="#{addNewRuleBean.objects}" rowKey="#{data.ontologyURI}"
							selectionMode="single"
							selection="#{addNewRuleBean.selectedObjectProperty}"
							scrollable="true" scrollHeight="100">
							<f:facet name="header">
								<h:outputText value="Object Properties" />
							</f:facet>

							<p:column headerText="Name">
								<h:outputText value="#{data.propertyName}" />
							</p:column>
							<p:column headerText="Range">
								<h:outputText value="#{data.rangeOfClasses[0]}" />
							</p:column>

						</p:dataTable>

						<p:dataTable id="instances" var="data"
							value="#{addNewRuleBean.instances}" rowKey="#{data}"
							selectionMode="single"
							selection="#{addNewRuleBean.selectedInstance}" scrollable="true"
							scrollHeight="50">

							<p:column headerText="Instances">
								<h:outputText value="#{data}" />
							</p:column>

						</p:dataTable>

						<p:dataTable id="methods" var="method" value="#{main.methods}"
							rowKey="#{method.originalName}" selectionMode="single"
							selection="#{addNewRuleBean.selectedMethod}" scrollable="true"
							scrollHeight="100">
							<p:column headerText="Primitive Methods">
								<h:outputText value="#{method.usingName}" />
							</p:column>
						</p:dataTable>

					</h:panelGrid>

					<p:contextMenu for="tree">
						<p:menuitem value="Move to conditions"
							update=":#{p:component('pan1')}"
							actionListener="#{addNewRuleBean.createClassElement('pan1')}" />
						<p:menuitem value="Move to conclusions"
							update=":#{p:component('pan2')}"
							actionListener="#{addNewRuleBean.createClassElement('pan2')}" />
					</p:contextMenu>

					<p:contextMenu for="methods">
						<p:menuitem value="Move to conditions"
							update=":#{p:component('pan1')}"
							actionListener="#{addNewRuleBean.createMethodElement('pan1')}" />
						<p:menuitem value="Move to conclusions"
							update=":#{p:component('pan2')}"
							actionListener="#{addNewRuleBean.createMethodElement('pan2')}" />
					</p:contextMenu>

					<p:contextMenu for="dataProperties">
						<p:menuitem value="Move to conditions"
							update=":#{p:component('pan1')},:#{p:component('dataProperties')}"
							actionListener="#{addNewRuleBean.createPropertyElement('pan1')}" />
						<p:menuitem value="Move to conclusions"
							update=":#{p:component('pan2')},:#{p:component('dataProperties')}"
							actionListener="#{addNewRuleBean.createPropertyElement('pan2')}" />
					</p:contextMenu>

					<p:contextMenu for="objectProperties">
						<p:menuitem value="Move to conditions"
							update=":#{p:component('pan1')},:#{p:component('objectProperties')}"
							actionListener="#{addNewRuleBean.createPropertyElement('pan1')}" />
						<p:menuitem value="Move to conclusions"
							update=":#{p:component('pan2')},:#{p:component('objectProperties')}"
							actionListener="#{addNewRuleBean.createPropertyElement('pan2')}" />
					</p:contextMenu>

					<p:contextMenu for="instances">
						<p:menuitem value="Move to conditions"
							update=":#{p:component('pan1')}"
							actionListener="#{addNewRuleBean.createInstanceElement('pan1')}" />
						<p:menuitem value="Move to conclusions"
							update=":#{p:component('pan2')}"
							actionListener="#{addNewRuleBean.createInstanceElement('pan2')}" />
					</p:contextMenu>

				</h:panelGrid>


				<h:panelGrid columns="2" id="panelsgrid">

					<p:panel header="conditions" id="pan1"
						style="height:800px;width:530px;">
						<f:facet name="header">
							<h:outputText value="Conditions" />
						</f:facet>
						<p:diagram value="#{addNewRuleBean.conditionsModel}"
							id="conditionsDiagram" style="height:750px;width:500px;"
							styleClass="ui-widget-content" var="item">

							<f:facet name="element">
								<p:panel id="pnl1" header="#{item.label}: #{item.elementName}">
									<h:panelGrid columns="2">
										<p:panelGrid columns="2" columnClasses="label,value"
											id="elementGrid1">

											<h:outputLabel value="Order:" rendered="#{item.order!=0}" />
											<h:outputText value="#{item.order}"
												rendered="#{item.order!=0}" />


											<h:outputLabel label="varName"
												rendered="#{item.method.originalName!=''}"
												style="width: 80px;" autocomplete="off" value="Arguments:" />
											<h:outputText label="varName"
												rendered="#{item.method.originalName!=''}"
												style="width: 80px;" autocomplete="off"
												value="#{item.method.helpString}" />


											<h:outputLabel label="varName"
												rendered="#{item.label=='Class'}" style="width: 80px;"
												autocomplete="off" value="Var:" />
											<h:outputText label="varName"
												rendered="#{item.label=='Class'}" style="width: 80px;"
												autocomplete="off" value="#{item.classVariable}" />


											<h:outputLabel label="varName"
												rendered="#{item.property.ontologyURI!=''}"
												style="width: 80px;" autocomplete="off" value="Var:" />
											<h:outputText label="varName"
												rendered="#{item.property.ontologyURI!=''}"
												style="width: 80px;" autocomplete="off"
												value="#{item.property.classVar}" />


											<h:outputLabel label="value" rendered="#{item.editValue}"
												style="width: 80px;" autocomplete="off" value="Value:" />
											<h:outputText label="value" rendered="#{item.editValue}"
												style="width: 80px;" autocomplete="off"
												value="#{item.property.value}" />


										</p:panelGrid>
										<p:commandButton oncomplete="PF('editDialog').show()"
											actionListener="#{addNewRuleBean.editNode}" title="View"
											icon="ui-icon-search" update=":#{p:component('editDialog')}">
											<f:param name="id" value="#{item.id}" />
											<f:param name="panel" value="conditions" />
										</p:commandButton>
									</h:panelGrid>
								</p:panel>
							</f:facet>

							<p:ajax event="connect" listener="#{addNewRuleBean.onConnect}"
								update=":#{p:component('conditionsDiagram')}" />
							<p:ajax event="disconnect"
								listener="#{addNewRuleBean.onDisconnect}" />
							<p:ajax event="connectionChange"
								listener="#{addNewRuleBean.onConnectionChange}"
								update=":#{p:component('conditionsDiagram')}" />
						</p:diagram>
					</p:panel>

					<p:panel header="conclusions" id="pan2"
						style="height:800px;width:530px;">
						<p:diagram value="#{addNewRuleBean.conclusionsModel}"
							style="height:750px;width:500px;" styleClass="ui-widget-content"
							var="item">
							<f:facet name="element">
								<p:panel id="pnl2" header="#{item.label}: #{item.elementName}">
									<h:panelGrid columns="2">
										<p:panelGrid columns="2" columnClasses="label,value"
											id="elementGrid2">

											<h:outputLabel value="Order:" rendered="#{item.order!=0}" />
											<h:outputText value="#{item.order}"
												rendered="#{item.order!=0}" />


											<h:outputLabel label="varName"
												rendered="#{item.method.originalName!=''}"
												style="width: 80px;" autocomplete="off" value="Arguments:" />
											<h:outputText label="varName"
												rendered="#{item.method.originalName!=''}"
												style="width: 80px;" autocomplete="off"
												value="#{item.method.helpString}" />


											<h:outputLabel label="varName"
												rendered="#{item.label=='Class'}" style="width: 80px;"
												autocomplete="off" value="Var:" />
											<h:outputText label="varName"
												rendered="#{item.label=='Class'}" style="width: 80px;"
												autocomplete="off" value="#{item.classVariable}" />


											<h:outputLabel label="varName"
												rendered="#{item.property.ontologyURI!=''}"
												style="width: 80px;" autocomplete="off" value="Var:" />
											<h:outputText label="varName"
												rendered="#{item.property.ontologyURI!=''}"
												style="width: 80px;" autocomplete="off"
												value="#{item.property.classVar}" />


											<h:outputLabel label="value" rendered="#{item.editValue}"
												style="width: 80px;" autocomplete="off" value="Value:" />
											<h:outputText label="value" rendered="#{item.editValue}"
												style="width: 80px;" autocomplete="off"
												value="#{item.property.value}" />


										</p:panelGrid>
										<p:commandButton oncomplete="PF('editDialog').show()"
											actionListener="#{addNewRuleBean.editNode}" title="View"
											icon="ui-icon-search" update=":#{p:component('editDialog')}">
											<f:param name="id" value="#{item.id}" />
											<f:param name="panel" value="conclusions" />
										</p:commandButton>
									</h:panelGrid>
								</p:panel>
							</f:facet>
							<p:ajax event="connect" listener="#{addNewRuleBean.onConnect}"
								update=":#{p:component('pan2')}" />
							<p:ajax event="disconnect"
								listener="#{addNewRuleBean.onDisconnect}" />
							<p:ajax event="connectionChange"
								listener="#{addNewRuleBean.onConnectionChange}"
								update=":#{p:component('pan2')}" />
						</p:diagram>


					</p:panel>
				</h:panelGrid>

				
				<p:commandButton id="clearConditions"
					update=":#{p:component('pan1')}"
					actionListener="#{addNewRuleBean.clearPanel('pan1')}" ajax="false"
					value="Clear conditions" title="Clear conditions panel">
				</p:commandButton>
				<p:commandButton id="clearConclusions"
					update=":#{p:component('pan2')}"
					actionListener="#{addNewRuleBean.clearPanel('pan2')}" ajax="false"
					value="Clear conclusions" title="Clear conclusions panel">
				</p:commandButton>
				
				<p:commandButton id="preview"
					actionListener="#{addNewRuleBean.previewRule}"
					update=":#{p:component('previewPanel')}"
					title="View the body of the rule"
					value="Preview Rule Body" icon="ui-icon-search">
				</p:commandButton>
				<p:panel header="Preview Panel" id="previewPanel"
					style="height:700px;width:400px;">
					<h:outputText value="#{addNewRuleBean.preview}" styleClass="preformatted"  />
				</p:panel>
				<p:commandButton actionListener="#{editRuleStep1Bean.reload}"
					action="/views/selectEditRule.xhtml?javax.portlet.faces.PortletMode=view&amp;javax.portlet.faces.WindowState=normal"
					title="Go to initial menu" id="prevBut" ajax="false"
					value="Previous step">
				</p:commandButton>
				<p:commandButton oncomplete="PF('addMessageDialog').show()"
					title="Go to next step of the creation of the rule"
					value="Next step">
				</p:commandButton>


			</p:panel>

			<p:dialog widgetVar="newRuleDialog" id="newRuleDialog" modal="true"
				header="Save rule configuration" resizable="false" showEffect="clip"
				dynamic="true" hideEffect="fold" position="center,center">
				<p:messages for="msgs" showDetail="true" autoUpdate="true"
					closable="true" />
				<h:panelGrid columns="2" columnClasses="label,value"
					styleClass="grid">
					<h:outputText value="Rule name: " id="ruleName" />
					<p:inputText label="Rule name" style="width: 300px;"
						id="newRuleName" autocomplete="off"
						value="#{addNewRuleBean.ruleName}" required="true">
					</p:inputText>
				</h:panelGrid>
				<p:fileUpload style="width: 600px;" mode="advanced"
					label="Select an existing rule file"
					value="#{addNewRuleBean.oldFileName}" auto="true"
					fileUploadListener="#{addNewRuleBean.uploadFileForSaveAs}"
					allowTypes="/(\.|\/)(rules)$/">
				</p:fileUpload>
				<h:panelGrid columns="2" columnClasses="label,value"
					styleClass="grid">
					<h:outputText value="Or create a new file " id="FileName"
						required="false" />
					<p:inputText label="File Name" style="width: 300px;"
						id="newFileName" autocomplete="off"
						value="#{addNewRuleBean.newFileName}">
					</p:inputText>
					<p:commandButton value="OK" id="okBut" ajax="false"
						oncomplete="PF('newRuleDialog').hide()"
						actionListener="#{addNewRuleBean.saveRule}" />
					<p:commandButton value="Cancel" id="cancelBut"
						oncomplete="PF('newRuleDialog').hide()" />

				</h:panelGrid>
			</p:dialog>

			<p:dialog widgetVar="editDialog" id="editDialog" modal="true"
				header="Edit node" resizable="false" showEffect="clip"
				dynamic="true" hideEffect="fold" position="center,center">
				<h:panelGrid styleClass="grid">
					<!-- two parameters,2a-->
					<h:panelGrid id="selections"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='2a')}"
						columns="3" columnClasses="output,label,value">
						<h:outputText value="Select classes" />

						<p:selectBooleanCheckbox value="#{addNewRuleBean.selectedClasses}">
							<p:ajax listener="#{addNewRuleBean.handleChangeInArguments}"
								update=":#{p:component('selections')}" />
						</p:selectBooleanCheckbox>


						<p:panelGrid id="gridType1" columns="2"
							columnClasses="label,value">
							<f:facet name="header">
Classes
</f:facet>
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}"
								disabled="#{addNewRuleBean.gridType1}">
								<f:selectItems var="item0" itemLabel="#{item0}"
									itemValue="#{item0}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[0]}" />

								<p:ajax event="change" process="@this"></p:ajax>

							</p:selectOneMenu>

							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}"
								disabled="#{addNewRuleBean.gridType1}">
								<f:selectItems var="item1" itemLabel="#{item1}"
									itemValue="#{item1}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[0]}" />
								<p:ajax event="change" process="@this"></p:ajax>

							</p:selectOneMenu>
						</p:panelGrid>

						<h:outputText value="Select or Fill values" />
						<p:selectBooleanCheckbox
							value="#{addNewRuleBean.selectedVariables}">
							<p:ajax listener="#{addNewRuleBean.handleChangeInArguments}"
								update=":#{p:component('selections')}" />
						</p:selectBooleanCheckbox>

						<p:panelGrid id="gridType2" columns="2"
							columnClasses="label,value">
							<f:facet name="header">
Values
</f:facet>

							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}"
								disabled="#{!addNewRuleBean.gridType1}">
								<f:selectItems var="item2" itemLabel="#{item2}"
									itemValue="#{item2}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[0]}" />
								<p:ajax event="change" process="@this" />

							</p:selectOneMenu>


							<p:inputText disabled="#{!addNewRuleBean.gridType1}"
								style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value5.value}">
							</p:inputText>

							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value4.value}"
								disabled="#{!addNewRuleBean.gridType1}">
								<f:selectItems var="item3" itemLabel="#{item3}"
									itemValue="#{item3}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[0]}" />
								<p:ajax event="change" process="@this" />
							</p:selectOneMenu>

							<p:inputText disabled="#{!addNewRuleBean.gridType1}"
								style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value6.value}">
							</p:inputText>
						</p:panelGrid>


					</h:panelGrid>
					<!-- two parameters 2b -->
					<h:panelGrid id="selections2b"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='2b')}"
						columns="3" columnClasses="output,label,value">

						<p:panelGrid id="gridType2b" columns="4" rows="2"
							columnClasses="label,value">
							<f:facet name="header">
Select or fill values
</f:facet>
							<h:outputText value="Select first Value: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[0]}" />

							</p:selectOneMenu>

							<h:outputText value="or fill first Value: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
							</p:inputText>

							<h:outputText value="Select second Value: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[1]}" />
							</p:selectOneMenu>

							<h:outputText value="or fill second Value: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value4.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- 3, e.g sum(?a,?b,?c)spinner,inputText only variables -->
					<h:panelGrid id="selections3"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='3')}"
						columns="3" columnClasses="output,label,value">

						<p:panelGrid id="gridType3" columns="4" rows="3"
							columnClasses="label,value">
							<f:facet name="header">
Select or fill Values
</f:facet>

							<h:outputText value="Select the first Value: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[0]}" />
							</p:selectOneMenu>

							<h:outputText value="or fill the first Value: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value4.value}">
							</p:inputText>

							<h:outputText value="Select the second Value: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[1]}" />
							</p:selectOneMenu>

							<h:outputText value="or fill the second Value: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value5.value}">
							</p:inputText>

							<h:outputText value="Select the variable to assign the result: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[2]}" />
							</p:selectOneMenu>

							<h:outputText value="or fill the variable to assign the result: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value6.value}">
							</p:inputText>
						</p:panelGrid>


					</h:panelGrid>
					<!-- 4,makeskolem-->
					<h:panelGrid id="selections2"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='4')}"
						columns="2" columnClasses="output,label">

						<p:panelGrid id="gridType4" columns="2" rows="3"
							columnClasses="label,value1,value2">
							<f:facet name="header">
Select Classes
</f:facet>
							<h:outputText value="Blank Node: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[0]}" />

								<p:ajax event="change" update=":#{p:component('gridType4')}"
									listener="#{addNewRuleBean.spinnerValueChangeForClasses}">
								</p:ajax>

							</p:selectOneMenu>

							<h:outputText value="First Value: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[1]}" />
								<p:ajax event="change" update=":#{p:component('gridType4')}"
									listener="#{addNewRuleBean.spinnerValueChangeForClasses}">
								</p:ajax>

							</p:selectOneMenu>

							<h:outputText value="Second Value: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[2]}" />
								<p:ajax event="change" update=":#{p:component('gridType4')}"
									listener="#{addNewRuleBean.spinnerValueChangeForClasses}">
								</p:ajax>

							</p:selectOneMenu>
						</p:panelGrid>

					</h:panelGrid>
					<!-- one parameter, 1-->
					<h:panelGrid id="selections1Category"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='1')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridType5" columns="1" columnClasses="label">
							<f:facet name="header">
Classes
</f:facet>
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[0]}" />

							</p:selectOneMenu>
						</p:panelGrid>
					</h:panelGrid>
					<!-- drop/remove method, removes triple according to order-->
					<h:panelGrid id="selections4"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='5')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridType6" columns="2"
							columnClasses="label,value">
							<h:outputText value="Order number of the triple to remove: "
								id="tripleToRemove" />
							<p:inputText label="tripleToRemove" style="width: 100px;"
								id="tripleValue" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- noValue method, category 6-->
					<h:panelGrid id="selections5"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.originalName=='noValue')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridType7" columns="2"
							columnClasses="label,value">

							<h:outputText value="Order number of the triple: " />
							<p:inputText label="tripleToRemove" style="width: 100px;"
								autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- print method,category 7-->
					<h:panelGrid id="selections7"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='7')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypePrint" columns="2"
							columnClasses="label,value">
							<h:outputText value="Text to be printed: " />
							<h:inputTextarea label="tripleToRemove" style="width: 200px;"
								autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</h:inputTextarea>
						</p:panelGrid>
					</h:panelGrid>
					<!-- now(x) method, category 8-->
					<h:panelGrid id="selections8"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='8')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeNow" columns="2"
							columnClasses="label,value">
							<h:outputText value="Variable to be binded to the current time: " />
							<p:inputText style="width: 100px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- makeTemp method, category 9-->
					<h:panelGrid id="selections9"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='9')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeMakeTemp" columns="2"
							columnClasses="label,value">
							<h:outputText value="Variable to be binded to a new node: " />
							<p:inputText style="width: 100px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- regex method, category 10-->
					<h:panelGrid id="selections10"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='10')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeRegex" columns="2" rows="2"
							columnClasses="label,value">

							<h:outputText value="First Literal: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</p:inputText>

							<h:outputText value="Second Literal: " />
							<p:inputText style="width: 300px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
							</p:inputText>

						</p:panelGrid>
					</h:panelGrid>
					<!-- makeInstance method, category 11-->
					<h:panelGrid id="selections11"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='11')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeMakeInstance" columns="2" rows="4"
							columnClasses="label,value">

							<h:outputText value="Resource: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[0]}" />
								<p:ajax event="change" update="propertiesSpinner"
									listener="#{addNewRuleBean.updatePropertiesList}" />

							</p:selectOneMenu>

							<h:outputText value="Property: " />
							<p:selectOneMenu id="propertiesSpinner"
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item" itemLabel="#{item.propertyName}"
									itemValue="#{item.propertyName}"
									value="#{addNewRuleBean.propertiesList}" />
							</p:selectOneMenu>

							<h:outputText value="Type(optional): " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.types}" />
							</p:selectOneMenu>

							<h:outputText value="Blank Node: " />
							<p:inputText style="width: 150px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value4.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- listContains/listNotContains method, category 12-->
					<h:panelGrid id="selections12"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='12')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeListContains" columns="2" rows="2"
							columnClasses="label,value">

							<h:outputText value="List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

							<h:outputText value="Element: " />
							<p:inputText style="width: 150px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
							</p:inputText>

						</p:panelGrid>
					</h:panelGrid>
					<!-- listEqual/listNotEqual method, category 13-->
					<h:panelGrid id="selections13"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='13')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeListEquality" columns="4"
							columnClasses="label,value">

							<h:outputText value="First List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

							<h:outputText value="Second List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

						</p:panelGrid>
					</h:panelGrid>
					<!-- listLength method, category 14-->
					<h:panelGrid id="selections14"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='14')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeListLength" columns="4"
							columnClasses="label,value">

							<h:outputText value="List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

							<h:outputText
								value="Node to be binded to the length of the list: " />
							<p:inputText style="width: 150px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
							</p:inputText>

						</p:panelGrid>
					</h:panelGrid>
					<!-- table method, category 16-->
					<h:panelGrid id="selections16"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='16')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeTable" columns="2"
							columnClasses="label,value">

							<h:outputText value="Property: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item"
									itemLabel="#{item.propertyName} (#{item.className})"
									itemValue="#{item.propertyName}"
									value="#{addNewRuleBean.propertiesList}" />
							</p:selectOneMenu>
						</p:panelGrid>
					</h:panelGrid>
					<!-- hide method, category 17-->
					<h:panelGrid id="selections17"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='17')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeHide" columns="2"
							columnClasses="label,value">

							<h:outputText value="Predicate to be hidden: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarClassesLists[0]}" />
							</p:selectOneMenu>
						</p:panelGrid>
					</h:panelGrid>
					<!-- isDType/notDType method, category 18-->
					<h:panelGrid id="selections18"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='18')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeisDType" columns="2" rows="2"
							columnClasses="label,value">

							<h:outputText value="Literal: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}"
									value="#{addNewRuleBean.cloneSelectedNode.method.listOfVarValuesLists[0]}" />
							</p:selectOneMenu>

							<h:outputText value="Type: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.types}" />
							</p:selectOneMenu>
						</p:panelGrid>
					</h:panelGrid>
					<!-- listEntry method, category 19-->
					<h:panelGrid id="selections19"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='19')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeListEntry" columns="2" rows="3"
							columnClasses="label,value">

							<h:outputText value="List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

							<h:outputText value="Index: " />
							<p:inputText style="width: 100px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
							</p:inputText>

							<h:outputText value="Value: " />
							<p:inputText style="width: 100px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
							</p:inputText>

						</p:panelGrid>
					</h:panelGrid>
					<!-- listMapAsObject method, category 20-->
					<h:panelGrid id="selections20"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='20')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeListMapAsObject" columns="2" rows="3"
							columnClasses="label,value">

							<h:outputText value="Value: " />
							<p:inputText style="width: 100px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
							</p:inputText>

							<h:outputText value="Property: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item"
									itemLabel="#{item.propertyName} (#{item.className})"
									itemValue="#{item.propertyName}"
									value="#{addNewRuleBean.propertiesList}" />
							</p:selectOneMenu>

							<h:outputText value="List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

						</p:panelGrid>
					</h:panelGrid>
					<!-- listMapAsSubject method, category 21-->
					<h:panelGrid id="selections21"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='BUILTIN_METHOD'
						and (addNewRuleBean.cloneSelectedNode.method.category=='21')}"
						columns="1" columnClasses="output">

						<p:panelGrid id="gridTypeListMapAsSubject" columns="2" rows="3"
							columnClasses="label,value">

							<h:outputText value="List: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value1.value}">
								<f:selectItems var="item" itemLabel="#{item}"
									itemValue="#{item}" value="#{addNewRuleBean.jenaLists}" />
							</p:selectOneMenu>

							<h:outputText value="Property: " />
							<p:selectOneMenu
								value="#{addNewRuleBean.cloneSelectedNode.method.value2.value}">
								<f:selectItems var="item"
									itemLabel="#{item.propertyName} (#{item.className})"
									itemValue="#{item.propertyName}"
									value="#{addNewRuleBean.propertiesList}" />
							</p:selectOneMenu>

							<h:outputText value="Value: " />
							<p:inputText style="width: 100px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.method.value3.value}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<!-- Class element -->
					<h:panelGrid id="classGrid"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='CLASS'}"
						columns="1" columnClasses="output">
						<p:panelGrid id="gridTypeClass" columns="2"
							columnClasses="label,value">

							<h:outputText value="Class variable name: " />
							<p:inputText style="width: 200px;" autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.classVariable}">
							</p:inputText>
						</p:panelGrid>
					</h:panelGrid>
					<h:panelGrid id="dataPropertyPanel"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='DATA_PROPERTY'}">

						<h:outputText value="This property refers to: " />
						<p:panelGrid columns="2" cellpadding="5">

							<p:selectOneRadio id="options" value="#{addNewRuleBean.option}"
								layout="pageDirection">
								<f:selectItem itemLabel=" a class variable" itemValue="class" />
								<f:selectItem itemLabel=" an instance" itemValue="instance" />
								<p:ajax update=":#{p:component('comboboxes')}" />
							</p:selectOneRadio>


							<h:panelGrid columns="1" cellpadding="5" id="comboboxes">

								<p:selectOneMenu disabled="#{addNewRuleBean.option=='instance'}"
									value="#{addNewRuleBean.cloneSelectedNode.property.classVar}">
									<f:selectItems var="item" itemLabel="#{item}"
										itemValue="#{item}"
										value="#{addNewRuleBean.tempVariablesForClasses}" />
								</p:selectOneMenu>

								<p:selectOneMenu disabled="#{addNewRuleBean.option=='class'}"
									value="#{addNewRuleBean.cloneSelectedNode.property.classVar}">
									<f:selectItems var="item" itemLabel="#{item}"
										itemValue="#{item}"
										value="#{addNewRuleBean.tempInstancesForClasses}" />
								</p:selectOneMenu>
							</h:panelGrid>

							<h:outputText value="Value: " />
							<p:inputText style="width: 300px;" id="clonedValue1"
								autocomplete="off"
								value="#{addNewRuleBean.cloneSelectedNode.property.value}">
							</p:inputText>

						</p:panelGrid>

					</h:panelGrid>

					<h:panelGrid id="objectPropertyPanel"
						rendered="#{addNewRuleBean.cloneSelectedNode.type=='OBJECT_PROPERTY'}">

						<h:outputText value="This property refers to: " />
						<p:panelGrid columns="2" cellpadding="5">

							<p:selectOneRadio id="options3" value="#{addNewRuleBean.option}"
								layout="pageDirection">
								<f:selectItem itemLabel=" a class variable" itemValue="class" />
								<f:selectItem itemLabel=" an instance" itemValue="instance" />
								<p:ajax update=":#{p:component('comboboxes3')}" />
							</p:selectOneRadio>


							<p:panelGrid columns="1" cellpadding="5" id="comboboxes3">

								<p:selectOneMenu disabled="#{addNewRuleBean.option=='instance'}"
									value="#{addNewRuleBean.cloneSelectedNode.property.classVar}">
									<f:selectItems var="item" itemLabel="#{item}"
										itemValue="#{item}"
										value="#{addNewRuleBean.tempVariablesForClasses}" />
								</p:selectOneMenu>

								<p:selectOneMenu disabled="#{addNewRuleBean.option=='class'}"
									value="#{addNewRuleBean.cloneSelectedNode.property.classVar}">
									<f:selectItems var="item" itemLabel="#{item}"
										itemValue="#{item}"
										value="#{addNewRuleBean.tempInstancesForClasses}" />
								</p:selectOneMenu>
							</p:panelGrid>
						</p:panelGrid>

						<h:outputText value="The value of this property refers to: " />
						<p:panelGrid columns="2" cellpadding="5">

							<p:selectOneRadio id="options2" value="#{addNewRuleBean.option}"
								layout="pageDirection">
								<f:selectItem itemLabel=" a class variable" itemValue="class" />
								<f:selectItem itemLabel=" an instance" itemValue="instance" />
								<p:ajax update=":#{p:component('comboboxes2')}" />
							</p:selectOneRadio>


							<p:panelGrid columns="1" cellpadding="5" id="comboboxes2">

								<p:selectOneMenu disabled="#{addNewRuleBean.option=='instance'}"
									value="#{addNewRuleBean.cloneSelectedNode.property.value}">
									<f:selectItems var="item" itemLabel="#{item}"
										itemValue="#{item}"
										value="#{addNewRuleBean.tempVariablesForValues}" />
								</p:selectOneMenu>

								<p:selectOneMenu disabled="#{addNewRuleBean.option=='class'}"
									value="#{addNewRuleBean.cloneSelectedNode.property.value}">
									<f:selectItems var="item" itemLabel="#{item}"
										itemValue="#{item}"
										value="#{addNewRuleBean.tempInstancesForValues}" />
								</p:selectOneMenu>
							</p:panelGrid>
						</p:panelGrid>
					</h:panelGrid>

					<p:panelGrid columns="2" columnClasses="label">
						<h:outputText value="Order: " />
						<p:inputText style="width: 150px;" autocomplete="off"
							value="#{addNewRuleBean.cloneSelectedNode.order}">
						</p:inputText>
					</p:panelGrid>
					<h:panelGrid id="buttons" columns="3" columnClasses="label">

						<p:commandButton action="#{addNewRuleBean.saveEditOfNode}"
							icon="ui-icon-save" title="Save changes"
							update=":#{p:component('pan1')},:#{p:component('pan2')},:#{p:component('selections')}"
							value="Save" oncomplete="PF('editDialog').hide()">
						</p:commandButton>
						<p:commandButton icon="ui-icon-close" title="Cancel"
							update=":#{p:component('pan1')},:#{p:component('pan2')}"
							value="Cancel" oncomplete="PF('editDialog').hide()">
						</p:commandButton>
						<p:commandButton action="#{addNewRuleBean.removeNode}"
							icon="ui-icon-close" title="Remove node"
							update=":#{p:component('pan1')},:#{p:component('pan2')}"
							value="Delete" oncomplete="PF('editDialog').hide()">
						</p:commandButton>
					</h:panelGrid>
				</h:panelGrid>
			</p:dialog>

			<p:dialog widgetVar="addMessageDialog" id="addMessageDialog"
				modal="true"
				header="Do you want this rule send a message to the user?"
				resizable="false" showEffect="clip" dynamic="true" hideEffect="fold"
				position="center,center">
				<h:panelGrid columns="2" columnClasses="label,value"
					styleClass="grid">
					<p:commandButton actionListener="#{addMessageBean.init(false)}"
						icon="ui-icon-save" title="Move to next step to add a message"
						ajax="false"
						action="/views/addMessage.xhtml?javax.portlet.faces.PortletMode=view&amp;javax.portlet.faces.WindowState=normal"
						value="Yes">
					</p:commandButton>
					<p:commandButton icon="ui-icon-close" ajax="false"
						title="Save the rule withount adding a message" value="No"
						actionListener="#{addNewRuleBean.getPreviousStep('/views/addConflictResolRule.xhtml?javax.portlet.faces.PortletMode=view&amp;javax.portlet.faces.WindowState=normal')}"
						action="/views/saveRule.xhtml?javax.portlet.faces.PortletMode=view&amp;javax.portlet.faces.WindowState=normal">
					</p:commandButton>
				</h:panelGrid>
			</p:dialog>
		</h:form>


	</h:body>
</f:view>